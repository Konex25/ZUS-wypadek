// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Case {
  id          String   @id @default(uuid())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  status      String   // "pending" | "processing" | "completed" | "error"
  nip         String?
  error       String?
  
  // JSON fields for complex data
  aiOpinion   Json?
  differences Json?
  
  // Relacje
  documents   Document[]
  
  @@index([status])
  @@index([createdAt])
  @@map("cases")
}

model Document {
  id          String   @id @default(uuid())
  caseId      String
  fileName    String
  fileSize    Int
  mimeType    String
  uploadedAt  DateTime @default(now())
  
  // Relacja
  case        Case     @relation(fields: [caseId], references: [id], onDelete: Cascade)
  
  @@index([caseId])
  @@map("documents")
}
